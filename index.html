<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Hello, World!</title>
  </head>
  <body>
    <h1>Dog Glossary</h1>
    <button id="button-random-dog">Show Random Dog</button>
    <label for="input-breed">Breed</label>
    <input type="text" id="input-breed" placeholder="Enter a breed" />
    <button id="button-show-breed">Show Breed</button>
    <button id="button-show-sub-breed">Show Sub-Breed</button>
    <button id="button-show-all">Show All Breeds</button>
    <div id="content"></div>
  </body>
  <script>
    const content = document.getElementById("content");
    const img = document.createElement("img");
    const randomBtn = document.getElementById("button-random-dog");
    const subBreedBtn = document.getElementById("button-show-sub-breed");
    async function getRandomDog() {
      content.innerHTML = "";
      const response = await fetch("https://dog.ceo/api/breeds/image/random");
      const data = await response.json();
      img.src = data.message;
      content.append(img);
      return 0;
    }

    const showBreedBtn = document.getElementById("button-show-breed");
    const inputBreed = document.getElementById("input-breed");
    const showAllBtn = document.getElementById("button-show-all");

    async function getBreedImages(breed) {
      content.innerHTML = "";
      try {
        const response = await fetch(`https://dog.ceo/api/breed/${breed}/images
    `);
        const data = await response.json();
        if (data.code === 404) {
          throw new Error("Breed not found!");
        }

        img.src = data.message[0];
        content.append(img);
      } catch (error) {
        const p = document.createElement("p");
        p.innerText = "Breed not found!";
        content.append(p);
      }
      return 0;
    }

    async function getSubBreed(breed) {
      content.innerHTML = "";
      try {
        const response = await fetch(`https://dog.ceo/api/breed/${breed}/list
`);
        const data = await response.json();
        if (data.code === 404) {
          throw new Error("Breed not found!");
        }

        if (0 === data.message.length) {
          const p = document.createElement("p");
          p.innerText = "No sub-breeds found!";
          content.append(p);
        } else {
          const arr = data.message;

          // Ordered list creation to use arr and appending to content div
          const list = document.createElement("ol");
          content.append(list);
          for (let item in arr) {
            const li = document.createElement("li");
            li.innerText = arr[item];
            list.append(li);
          }
        }

        // data names inside arr
      } catch (error) {
        const p = document.createElement("p");
        p.innerText = "Breed not found!";
        content.append(p);
      }
    }

    async function getAllBreeds() {
      content.innerHTML = "";

      const response = await fetch("https://dog.ceo/api/breeds/list/all");
      const data = await response.json();
      const dataList = data.message;
      const oList = document.createElement("ol");

      for (const key in dataList) {
        const li = document.createElement("li");
        li.innerText = key;

        if (dataList[key].length !== 0) {
          const uList = document.createElement("ul");
          for (const item of dataList[key]) {
            const li = document.createElement("li");
            li.innerText = item;
            uList.appendChild(li);
          }
          li.appendChild(uList);
        }
        oList.append(li);
      }
      content.append(oList);
    }

    randomBtn.addEventListener("click", getRandomDog);
    showBreedBtn.addEventListener("click", () =>
      getBreedImages(inputBreed.value.toLowerCase())
    );
    subBreedBtn.addEventListener("click", () =>
      getSubBreed(inputBreed.value.toLowerCase())
    );
    showAllBtn.addEventListener("click", () => getAllBreeds());
  </script>
</html>
